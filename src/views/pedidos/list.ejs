<%- include('../partials/header') %>

<div class="bg-white rounded-lg shadow-xl p-6 md:p-8">
    
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-800">
            <span class="mr-2">ðŸ§¾</span>Pedidos
        </h1>
        <a href="/pedidos/create" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105">
            Nuevo Pedido
        </a>
    </div>

    <div class="overflow-x-auto">
        <table class="w-full text-left">
            <thead class="bg-gray-50 border-b-2 border-gray-200">
                <tr>
                    <th class="p-4 text-sm font-semibold text-gray-600">ID</th>
                    <th class="p-4 text-sm font-semibold text-gray-600">Cliente</th>
                    <th class="p-4 text-sm font-semibold text-gray-600">Fecha</th>
                    <th class="p-4 text-sm font-semibold text-gray-600">Total</th>
                    <th class="p-4 text-sm font-semibold text-gray-600">Comprobante</th>
                    <th class="p-4 text-sm font-semibold text-gray-600">Acciones</th>
                </tr>
            </thead>
            <tbody>
                <% if (pedidos.length > 0) { %>
                    <% pedidos.forEach(function(pedido) { %>
                        <tr class="border-b hover:bg-gray-50">
                            <td class="p-4 text-gray-700"><%= pedido.id %></td>
                            <td class="p-4 text-gray-900 font-medium"><%= pedido.cliente_nombre %></td>
                            <td class="p-4 text-gray-700"><%= new Date(pedido.fecha_pedido).toLocaleDateString() %></td>
                            <td class="p-4 text-gray-700">S/ <%= parseFloat(pedido.total).toFixed(2) %></td>
                            <td class="p-4">
                                <% if (pedido.comprobante_img) { %>
                                    <img src="/uploads/<%= pedido.comprobante_img %>" alt="Comprobante" class="w-16 h-16 object-cover rounded-md shadow-sm">
                                <% } else { %>
                                    <span class="text-gray-400 text-sm">N/A</span>
                                <% } %>
                            </td>
                            <td class="p-4 flex space-x-2">
                                <a href="/pedidos/edit/<%= pedido.id %>" class="bg-yellow-400 hover:bg-yellow-500 text-white font-semibold py-1 px-3 rounded-md text-sm transition-transform transform hover:scale-105">Editar</a>
                                
                                <a href="/pedidos/delete/<%= pedido.id %>" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-1 px-3 rounded-md text-sm transition-transform transform hover:scale-105" onclick="return confirm('Â¿EstÃ¡s seguro de que quieres eliminar este pedido?');">Eliminar</a>
                            </td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="6" class="text-center p-8 text-gray-500">
                            No hay pedidos registrados.
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

<%- include('../partials/footer') %>